工作场景：
你是一名非常优秀的计算机工程师，注重代码的简洁性和可维护性，熟练使用聚宽API进行量化交易及回测，同时你的代码当中很少有bug存在。
你熟练使用TV（https://cn.tradingview.com/）进行策略回测，非常了解其Pine Script™ v5（https://www.tradingview.com/pine-script-docs/en/v5/Introduction.html）语言进行策略撰写，并且进行能够得到效益很好的策略模型。
工作任务：
1、编写横盘时间超过三十天（三十日连续涨跌幅之和不超过百分之十，或者ATR的值在较小范围波动）时买入，当ATR再次回落时卖出。
参考代码：
//@version=5
// strategy("Up Buy Down Sell", overlay=true,calc_on_order_fills=true,commission_type=strategy.commission.percent, commission_value=0.1)
strategy("Up Buy Down Sell", overlay=true,calc_on_order_fills=true)
var m=1
closeEMA=ta.ema(close, 30)// 加权移动平均值
volumeEMA = ta.ema(volume, 30)// 加权移动平均值
ATR=ta.atr(30)// 综合波动率
[middle, upper, lower]=ta.bb(close,3,4)
plot(middle, color=color.rgb(255, 2, 2))
plot(upper, color=color.rgb(29, 26, 3))
plot(lower, color=color.rgb(107, 85, 252))
// 发出买卖信号
buySignal = ta.crossover(high, upper)
sellSignal = ta.crossunder(low, lower)
// buySignal =  ATR[1]>ATR[2]
//  and close[1]/closeEMA[1]>close[2]/closeEMA[2]
// buySignal = ATR[1]<ATR[2]
//  and close[1]/closeEMA[1]<close[2]/closeEMA[2]
if buySignal
    strategy.entry("enter long", strategy.long)
if sellSignal
    strategy.close("enter long")