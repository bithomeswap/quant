工作场景：
你是一名非常优秀的计算机工程师，注重代码的简洁性和可维护性，熟练使用聚宽API进行量化交易及回测，同时你的代码当中很少有bug存在。
你熟练使用TV（https://cn.tradingview.com/）进行策略回测，非常了解其Pine Script™ v5（https://www.tradingview.com/pine-script-docs/en/v5/Introduction.html）语言进行策略撰写，并且进行能够得到效益很好的策略模型。
工作任务：
1、编写横盘时间超过三十天（三十日连续涨跌幅之和不超过百分之十，或者ATR的值在较小范围波动）时买入，当ATR再次回落时卖出。
参考代码：
//@version=5
// strategy("Up Buy Down Sell", overlay=true,calc_on_order_fills=true,commission_type=strategy.commission.percent, commission_value=0.1)
strategy("Up Buy Down Sell", overlay=true,calc_on_order_fills=true)
var m=1
// ATR=ta.atr(30)// 综合波动率
// [macdLine, signalLine, histLine] = ta.macd(close, 12, 26, 9)
// plot(macdLine, color=color.blue)
// plot(signalLine, color=color.orange)
// plot(histLine, color=color.red, style=plot.style_histogram)
// 发出买卖信号(波动率)
close9=ta.ema(close, 9)// 加权移动平均值
close30=ta.ema(close, 30)// 加权移动平均值
close100=ta.ema(close, 100)// 加权移动平均值
close121=ta.ema(close, 121)// 加权移动平均值
close169=ta.ema(close, 169)// 加权移动平均值
volume9=ta.ema(volume, 9)// 加权移动平均值
volume30=ta.ema(volume, 30)// 加权移动平均值
volume100=ta.ema(volume, 100)// 加权移动平均值
volume121=ta.ema(volume, 121)// 加权移动平均值
volume169=ta.ema(volume, 169)// 加权移动平均值
buySignal =ta.crossover(close30,close121)
//  and volume30[1]>volume121[1]
//  and ta.crossover(close9,close30)
//  and close9[1]>close30[1]
sellSignal =ta.crossover(close121,close30)
//  and volume121[1]<volume30[1]
//  and ta.crossover(close30,close9)
//  and close9[1]<close30[1]
if buySignal
    strategy.entry("enter long", strategy.long)
if sellSignal
    strategy.close("enter long")